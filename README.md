# Проект: Разделение Фронтенда на Микрофронтенды

## Введение

В рамках проекта был произведен анализ функционала приложения и анализ структуры взаимодействия с бекендом.
Было произведено разделение фронтенда на следующие микрофронтенды:

- **host** - основной микрофронтенд, который оркестрирует остальные
- **auth** - отвечает за аутентификацию пользователя (логин, регистрация и логаут)
- **card** - отвечает за карточки с фото (список, лайки, увеличение, добавление новых, удаление)
- **profile** - отвечает за профиль пользователя (получение профиля из бека, изменение профиля, изменение аватара)

Технология объединения микрофронтендов - Webpack Module Federation

---

## Структура Каталога Микрофронтенда

```plaintext
/microfrontend
    /src
        /components
        /styles
        /images
        /utils
        index.js
        index.html
        index.css
    package.json
    webpack.config.js
```

---

## Описание Фронтендов

### **auth-mf**

#### Перемещённые Компоненты
- `Login`
- `Register`
- `InfoTooltip`

#### Новый Компонент
- `LogoutButton` - для реализации функционала логаута

#### Используемые API
- `register`
- `login`

#### Хранение и Передача Аутентификационной Информации
- **Текущая реализация:** токен сохраняется в `localStorage`.
- **Альтернативы:**
  - Контекст, который можно передавать между микрофронтендами.
  - События Pub/Sub, которые фронт `auth` может публиковать для остальных.
  - Сохранение сессии в БД и синхронизация через БД.

#### Экспортируемые Компоненты через `index.js`
- `Login`
- `Register`
- `LogoutButton`

---

### **card-mf**

#### Перемещённые Компоненты
- `Card`
- `ImagePopup`
- `PopupWithForm`
- `AddPlacePopup`

#### Новый Компонент
- `CardsList` - для реализации функционала списка карточек с фото

#### Используемые API
- `getCardList`
- `addCard`
- `removeCard`
- `changeLikeCardStatus`

#### Передача Данных Профиля
- Информация о профиле поступает через контекст микрофронтенда `card`.

#### Экспортируемые Компоненты через `index.js`
- `CardsList`
- `AddPlacePopup`

---

### **profile-mf**

#### Перемещённые Компоненты
- `EditProfilePopup`
- `EditAvatarPopup`
- `PopupWithForm`

#### Новый Компонент
- `UserProfileContext` - для хранения данных пользователя

#### Используемые API
- `getUserInfo`
- `setUserInfo`
- `setUserAvatar`

#### Экспортируемые Компоненты через `index.js`
- `EditAvatarPopup`
- `EditProfilePopup`
- `UserProfileContext`
- `UserProfileProvider`

---

### **host-mf**

#### Перемещённые Компоненты
- `App`
- `Main`
- `Footer`
- `Header`
- `ProtectedRoute`

#### Используемые API
- `checkToken`

#### Импортируемые Микрофронтенды через Module Federation
- `auth-mf`
- `card-mf`
- `profile-mf`

---

### Заключение

Код успешно распределён между компонентами. На момент подготовки документа сборка проекта **не производилась**. Разделение обеспечит независимую разработку и поддержку каждого микрофронтенда, облегчая масштабирование и обновление системы.

